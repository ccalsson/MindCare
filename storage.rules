rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Contenido de audio (meditaciones, sonidos)
    match /audio/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if false; // Solo admins pueden subir contenido
    }
    
    // Imágenes de la aplicación
    match /images/{allPaths=**} {
      allow read: if true; // Público
      allow write: if false; // Solo admins
    }
    
    // Avatares de usuarios
    match /avatars/{userId} {
      allow read: if true; // Público
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    
    // Documentos de profesionales
    match /professionals/{professionalId}/{allPaths=**} {
      allow read: if true; // Público
      allow write: if false; // Solo admins
    }
    
    // Contenido premium
    match /premium/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if false; // Solo admins
    }
    
    // Archivos temporales
    match /temp/{allPaths=**} {
      allow read, write: if request.auth != null;
      // Los archivos temporales se eliminan automáticamente después de 24 horas
    }
  }
}
